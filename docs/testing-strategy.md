# ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆå®Œå…¨ç‰ˆï¼‰

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ã‚¹ãƒãƒ¼ãƒˆãƒ¬ã‚·ãƒ”ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼
**ä½œæˆæ—¥**: 2025å¹´11æœˆ6æ—¥
**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ6æ—¥
**ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Jest + React Testing Library + Cypress (E2E)

---

## ğŸ“‹ ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã®æ¦‚è¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€**ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰**ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¡ç”¨ã—ã€3å±¤ã®ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

```
        /\
       /  \    E2Eãƒ†ã‚¹ãƒˆ (å°‘æ•°ãƒ»é‡è¦ãƒ•ãƒ­ãƒ¼)
      /____\
     /      \  çµ±åˆãƒ†ã‚¹ãƒˆ (ä¸­ç¨‹åº¦ãƒ»æ©Ÿèƒ½å˜ä½)
    /________\
   /          \ å˜ä½“ãƒ†ã‚¹ãƒˆ (å¤šæ•°ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ/é–¢æ•°å˜ä½)
  /__________\
```

**ç¾åœ¨ã®ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆçŠ¶æ³** âœ…:
- Statements: 15.35% (ç›®æ¨™15%)
- Branches: 18.75% (ç›®æ¨™15%)
- Functions: 19.04% (ç›®æ¨™15%)
- Lines: 15.01% (ç›®æ¨™15%)

**ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ**: 10å€‹ï¼ˆ86ãƒ†ã‚¹ãƒˆæˆåŠŸï¼‰

---

## ğŸ“‚ å…¨ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ« ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒãƒƒãƒ—

### å‡¡ä¾‹
- âœ… **å®Ÿè£…æ¸ˆã¿**: ãƒ†ã‚¹ãƒˆãŒå®Ÿè£…ã•ã‚Œã€å‹•ä½œç¢ºèªæ¸ˆã¿
- ğŸ”² **æœªå®Ÿè£…**: ãƒ†ã‚¹ãƒˆãŒæœªå®Ÿè£…
- ğŸ¯ **å˜ä½“**: å˜ä½“ãƒ†ã‚¹ãƒˆã§å®Ÿè£…æ¨å¥¨
- ğŸ”— **çµ±åˆ**: çµ±åˆãƒ†ã‚¹ãƒˆã§å®Ÿè£…æ¨å¥¨
- ğŸŒ **E2E**: E2Eãƒ†ã‚¹ãƒˆã§å®Ÿè£…æ¨å¥¨
- âš ï¸ **ã‚¹ã‚­ãƒƒãƒ—æ¨å¥¨**: ãƒ†ã‚¹ãƒˆå®Ÿè£…ã®å„ªå…ˆåº¦ãŒä½ã„ã€ã¾ãŸã¯ä¸è¦

---

## 1. ğŸ¯ å˜ä½“ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

### 1.1 UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`components/ui/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| Button.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/Button.test.tsx` (8ãƒ†ã‚¹ãƒˆ) | å¤–éƒ¨ä¾å­˜ãªã—ã€‚ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€ã‚¤ãƒ™ãƒ³ãƒˆã€ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ†ã‚¹ãƒˆãŒå¯èƒ½ |
| Card.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/Card.test.tsx` (7ãƒ†ã‚¹ãƒˆ) | å¤–éƒ¨ä¾å­˜ãªã—ã€‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã€ã‚¯ãƒªãƒƒã‚¯ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ |
| Input.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/Input.test.tsx` (13ãƒ†ã‚¹ãƒˆ) | ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |
| Loading.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/Loading.test.tsx` (3ãƒ†ã‚¹ãƒˆ) | ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| ErrorMessage.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/ErrorMessage.test.tsx` (10ãƒ†ã‚¹ãƒˆ) | ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã€ãƒãƒªã‚¢ãƒ³ãƒˆã€ãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ |
| index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ã€ãƒ†ã‚¹ãƒˆä¸è¦ |

**å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…æ¸ˆã¿**: 5/5ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ100%ï¼‰

---

### 1.2 æ¤œç´¢æ©Ÿèƒ½ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`components/features/search/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| IngredientTag.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/IngredientTag.test.tsx` (5ãƒ†ã‚¹ãƒˆ) | å¤–éƒ¨ä¾å­˜ãªã—ã€‚å‰Šé™¤ãƒœã‚¿ãƒ³ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ |
| IngredientInput.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/IngredientInput.test.tsx` (11ãƒ†ã‚¹ãƒˆ) | useIngredientsãƒ•ãƒƒã‚¯ã¨ã®é€£æºã€ææ–™è¿½åŠ å‰Šé™¤ |
| RecipeSearchForm.tsx | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ä¾å­˜ |
| SearchButton.tsx | ğŸ¯ å˜ä½“ | ğŸ”² æœªå®Ÿè£… | - | ã‚·ãƒ³ãƒ—ãƒ«ãªãƒœã‚¿ãƒ³ã€å„ªå…ˆåº¦ä½ |
| index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ã€ãƒ†ã‚¹ãƒˆä¸è¦ |

**å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…æ¸ˆã¿**: 2/3ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ67%ï¼‰
**çµ±åˆãƒ†ã‚¹ãƒˆæ¨å¥¨**: 1ãƒ•ã‚¡ã‚¤ãƒ«

---

### 1.3 ãƒ¬ã‚·ãƒ”è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`components/features/recipe/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| RecipeCard.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/RecipeCard.test.tsx` (11ãƒ†ã‚¹ãƒˆ) | ãŠæ°—ã«å…¥ã‚Šãƒœã‚¿ãƒ³ã‚’ãƒ¢ãƒƒã‚¯åŒ–ã€ãƒ¬ã‚·ãƒ”è¡¨ç¤º |
| RecipeGrid.tsx | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/RecipeGrid.test.tsx` (6ãƒ†ã‚¹ãƒˆ) | ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã€ç©ºçŠ¶æ…‹ |
| IngredientList.tsx | ğŸ¯ å˜ä½“ | ğŸ”² æœªå®Ÿè£… | - | ã‚·ãƒ³ãƒ—ãƒ«ãªãƒªã‚¹ãƒˆè¡¨ç¤ºã€å„ªå…ˆåº¦ä¸­ |
| InstructionList.tsx | ğŸ¯ å˜ä½“ | ğŸ”² æœªå®Ÿè£… | - | ã‚·ãƒ³ãƒ—ãƒ«ãªãƒªã‚¹ãƒˆè¡¨ç¤ºã€å„ªå…ˆåº¦ä½ |
| IngredientWithAlternatives.tsx | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | Gemini APIå‘¼ã³å‡ºã—ã€éåŒæœŸå‡¦ç† |
| RecipeDetail.tsx | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | è¤‡æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ã€ãƒ†ã‚¹ãƒˆä¸è¦ |

**å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…æ¸ˆã¿**: 2/4ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ50%ï¼‰
**çµ±åˆãƒ†ã‚¹ãƒˆæ¨å¥¨**: 2ãƒ•ã‚¡ã‚¤ãƒ«

---

### 1.4 èªè¨¼ãƒ»ãŠæ°—ã«å…¥ã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`components/features/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| auth/AuthForm.tsx | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | Supabase Authä¾å­˜ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| auth/index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ |
| favorites/FavoriteButton.tsx | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | useAuth + useFavoritesã€Supabaseä¾å­˜ |
| favorites/FavoritesList.tsx | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | useFavoritesã€Supabaseä¾å­˜ |
| favorites/index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ |

**çµ±åˆãƒ†ã‚¹ãƒˆæ¨å¥¨**: 3ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå…¨ã¦å¤–éƒ¨ä¾å­˜ã‚ã‚Šï¼‰

---

### 1.5 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`components/layout/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| Header.tsx | ğŸ”— çµ±åˆ/ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | - | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€èªè¨¼çŠ¶æ…‹ä¾å­˜ |
| Footer.tsx | ğŸ¯ å˜ä½“ | ğŸ”² æœªå®Ÿè£… | - | ã‚·ãƒ³ãƒ—ãƒ«ãªé™çš„è¡¨ç¤ºã€å„ªå…ˆåº¦ä½ |
| Navigation.tsx | ğŸ”— çµ±åˆ/ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | - | ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€èªè¨¼çŠ¶æ…‹ä¾å­˜ |
| index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ |

**æ¨å¥¨**: E2Eãƒ†ã‚¹ãƒˆã§ã¾ã¨ã‚ã¦ãƒ†ã‚¹ãƒˆ

---

### 1.6 ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ (`hooks/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| useIngredients.ts | ğŸ¯ å˜ä½“ | âœ… å®Ÿè£…æ¸ˆã¿ | `__tests__/useIngredients.test.ts` (14ãƒ†ã‚¹ãƒˆ) | ç´”ç²‹ãªãƒ­ã‚¸ãƒƒã‚¯ã€å¤–éƒ¨ä¾å­˜ãªã— |
| useAuth.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | Supabase Authä¾å­˜ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† |
| useFavorites.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | Supabase Databaseä¾å­˜ã€CRUDæ“ä½œ |
| useRecipeSearch.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | APIå‘¼ã³å‡ºã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç† |

**å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…æ¸ˆã¿**: 1/1ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå¤–éƒ¨ä¾å­˜ãªã—ï¼‰
**çµ±åˆãƒ†ã‚¹ãƒˆæ¨å¥¨**: 3ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå…¨ã¦å¤–éƒ¨ä¾å­˜ã‚ã‚Šï¼‰

---

### 1.7 ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ (`components/providers/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| AuthProvider.tsx | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | - | Supabase Authä¾å­˜ã€èªè¨¼çŠ¶æ…‹ç®¡ç† |

**çµ±åˆãƒ†ã‚¹ãƒˆæ¨å¥¨**: 1ãƒ•ã‚¡ã‚¤ãƒ«

---

## 2. ğŸ”— çµ±åˆãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

### 2.1 APIãƒ«ãƒ¼ãƒˆ (`app/api/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| recipes/search/route.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `route.test.ts` | Gemini + Spoonacular APIçµ±åˆã€ä¸¦åˆ—å‡¦ç† |
| recipes/alternatives/route.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `route.test.ts` | Gemini APIå‘¼ã³å‡ºã—ã€JSONè§£æ |

**çµ±åˆãƒ†ã‚¹ãƒˆæ¨å¥¨**: 2ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆAPIãƒ¢ãƒƒã‚¯ä½¿ç”¨ï¼‰

**å®Ÿè£…ä¾‹**:
```typescript
// app/api/recipes/search/route.test.ts
import { POST } from './route';
import { generateRecipes } from '@/lib/gemini';
import { searchRecipesByIngredients } from '@/lib/recipe-api';

jest.mock('@/lib/gemini');
jest.mock('@/lib/recipe-api');

describe('POST /api/recipes/search', () => {
  it('ææ–™ãƒªã‚¹ãƒˆã‹ã‚‰ãƒ¬ã‚·ãƒ”ã‚’å–å¾—ã§ãã‚‹', async () => {
    (generateRecipes as jest.Mock).mockResolvedValue([/* AI recipes */]);
    (searchRecipesByIngredients as jest.Mock).mockResolvedValue([/* API recipes */]);

    const request = new Request('http://localhost/api/recipes/search', {
      method: 'POST',
      body: JSON.stringify({ ingredients: ['ç‰ã­ã', 'ã«ã‚“ã˜ã‚“'] }),
    });

    const response = await POST(request);
    const data = await response.json();

    expect(response.status).toBe(200);
    expect(data.success).toBe(true);
    expect(data.data.recipes).toHaveLength(6); // AI 3 + API 3
  });
});
```

---

### 2.2 å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆ (`lib/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| gemini/client.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `client.test.ts` | Gemini APIçµ±åˆã€ãƒ¢ãƒƒã‚¯æ¨å¥¨ |
| gemini/index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ |
| recipe-api/spoonacular.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `spoonacular.test.ts` | Spoonacular APIçµ±åˆã€ãƒ¢ãƒƒã‚¯æ¨å¥¨ |
| recipe-api/index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ |
| supabase/auth.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `auth.test.ts` | Supabase Authçµ±åˆã€ãƒ¢ãƒƒã‚¯æ¨å¥¨ |
| supabase/favorites.ts | ğŸ”— çµ±åˆ | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `favorites.test.ts` | Supabase Databaseçµ±åˆã€ãƒ¢ãƒƒã‚¯æ¨å¥¨ |
| supabase/client.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ†ã‚¹ãƒˆä¸è¦ |
| supabase/index.ts | âš ï¸ ã‚¹ã‚­ãƒƒãƒ— | ğŸ”² æœªå®Ÿè£… | - | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã®ã¿ |

**çµ±åˆãƒ†ã‚¹ãƒˆæ¨å¥¨**: 4ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆã™ã¹ã¦å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ä¾å­˜ï¼‰

---

## 3. ğŸŒ E2Eãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

### 3.1 ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (`app/`)

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|---------|----------|------|--------------|------|
| page.tsx | ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `cypress/e2e/home.cy.ts` | ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã€ææ–™å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  |
| recipes/page.tsx | ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `cypress/e2e/recipe-search.cy.ts` | ãƒ¬ã‚·ãƒ”ä¸€è¦§ã€æ¤œç´¢çµæœè¡¨ç¤º |
| recipes/[id]/page.tsx | ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `cypress/e2e/recipe-detail.cy.ts` | ãƒ¬ã‚·ãƒ”è©³ç´°ã€ä»£æ›¿ææ–™ææ¡ˆ |
| favorites/page.tsx | ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `cypress/e2e/favorites.cy.ts` | ãŠæ°—ã«å…¥ã‚Šä¸€è¦§ã€èªè¨¼å¿…é ˆ |
| auth/page.tsx | ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | æ¨å¥¨: `cypress/e2e/auth.cy.ts` | ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ— |
| layout.tsx | ğŸŒ E2E | ğŸ”² æœªå®Ÿè£… | - | å…¨ãƒšãƒ¼ã‚¸ã§ä½¿ç”¨ã€å„E2Eãƒ†ã‚¹ãƒˆã§æ¤œè¨¼ |

**E2Eãƒ†ã‚¹ãƒˆæ¨å¥¨**: 6ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼å…¨ä½“ï¼‰

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆå®Ÿè£…çŠ¶æ³ã‚µãƒãƒªãƒ¼

### å˜ä½“ãƒ†ã‚¹ãƒˆ
- **å®Ÿè£…æ¸ˆã¿**: 10ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ10ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã€86ãƒ†ã‚¹ãƒˆï¼‰
  - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: 5/5 (100%)
  - æ¤œç´¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: 2/3 (67%)
  - ãƒ¬ã‚·ãƒ”ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: 2/4 (50%)
  - ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯: 1/1 (100%)
- **æœªå®Ÿè£…ï¼ˆæ¨å¥¨ï¼‰**: 2ãƒ•ã‚¡ã‚¤ãƒ«
  - IngredientList.tsx, InstructionList.tsx
- **çµ±åˆãƒ†ã‚¹ãƒˆã¸ç§»è¡Œæ¨å¥¨**: RecipeSearchForm, IngredientWithAlternatives, RecipeDetail

### çµ±åˆãƒ†ã‚¹ãƒˆ
- **å®Ÿè£…æ¸ˆã¿**: 0ãƒ•ã‚¡ã‚¤ãƒ«
- **æœªå®Ÿè£…ï¼ˆæ¨å¥¨ï¼‰**: 14ãƒ•ã‚¡ã‚¤ãƒ«
  - APIãƒ«ãƒ¼ãƒˆ: 2ãƒ•ã‚¡ã‚¤ãƒ«
  - èªè¨¼ãƒ»ãŠæ°—ã«å…¥ã‚Š: 5ãƒ•ã‚¡ã‚¤ãƒ«
  - å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆ: 4ãƒ•ã‚¡ã‚¤ãƒ«
  - ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯: 3ãƒ•ã‚¡ã‚¤ãƒ«

### E2Eãƒ†ã‚¹ãƒˆ
- **å®Ÿè£…æ¸ˆã¿**: 0ãƒ•ã‚¡ã‚¤ãƒ«
- **æœªå®Ÿè£…ï¼ˆæ¨å¥¨ï¼‰**: 6ãƒšãƒ¼ã‚¸
  - ãƒ¬ã‚·ãƒ”æ¤œç´¢ãƒ•ãƒ­ãƒ¼ï¼ˆæœ€å„ªå…ˆï¼‰
  - ãŠæ°—ã«å…¥ã‚Šç™»éŒ²ãƒ•ãƒ­ãƒ¼
  - èªè¨¼ãƒ•ãƒ­ãƒ¼
  - ä»£æ›¿ææ–™ææ¡ˆãƒ•ãƒ­ãƒ¼

---

## ğŸ¯ ä»Šå¾Œã®å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆå®Œäº†âœ…ï¼‰
- âœ… UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆButtonã€Cardã€Inputã€Loadingã€ErrorMessageï¼‰
- âœ… ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆIngredientTagã€IngredientInputã€RecipeCardã€RecipeGridï¼‰
- âœ… ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼ˆuseIngredientsï¼‰
- âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸15%ä»¥ä¸Šé”æˆ

### Phase 2: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆæ¨å¥¨ï¼‰
**å„ªå…ˆåº¦é«˜**:
1. POST /api/recipes/search - ãƒ¬ã‚·ãƒ”æ¤œç´¢APIï¼ˆGemini + Spoonacularï¼‰
2. POST /api/recipes/alternatives - ä»£æ›¿ææ–™ææ¡ˆAPIï¼ˆGeminiï¼‰
3. lib/gemini/client.ts - Gemini APIçµ±åˆ
4. lib/supabase/auth.ts - èªè¨¼æ©Ÿèƒ½

**å„ªå…ˆåº¦ä¸­**:
5. lib/supabase/favorites.ts - ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½
6. components/features/auth/AuthForm.tsx - èªè¨¼ãƒ•ã‚©ãƒ¼ãƒ 
7. hooks/useAuth.ts - èªè¨¼ãƒ•ãƒƒã‚¯
8. hooks/useFavorites.ts - ãŠæ°—ã«å…¥ã‚Šãƒ•ãƒƒã‚¯

### Phase 3: E2Eãƒ†ã‚¹ãƒˆï¼ˆæ¨å¥¨ï¼‰
**å„ªå…ˆåº¦æœ€é«˜**:
1. ãƒ¬ã‚·ãƒ”æ¤œç´¢ãƒ•ãƒ­ãƒ¼: ææ–™å…¥åŠ› â†’ æ¤œç´¢ â†’ ãƒ¬ã‚·ãƒ”ä¸€è¦§ â†’ ãƒ¬ã‚·ãƒ”è©³ç´°

**å„ªå…ˆåº¦é«˜**:
2. ãŠæ°—ã«å…¥ã‚Šç™»éŒ²ãƒ•ãƒ­ãƒ¼: ãƒ­ã‚°ã‚¤ãƒ³ â†’ ãƒ¬ã‚·ãƒ”æ¤œç´¢ â†’ ãŠæ°—ã«å…¥ã‚Šè¿½åŠ  â†’ ãŠæ°—ã«å…¥ã‚Šä¸€è¦§
3. èªè¨¼ãƒ•ãƒ­ãƒ¼: ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ— â†’ ãƒ­ã‚°ã‚¤ãƒ³ â†’ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

**å„ªå…ˆåº¦ä¸­**:
4. ä»£æ›¿ææ–™ææ¡ˆãƒ•ãƒ­ãƒ¼: ãƒ¬ã‚·ãƒ”è©³ç´° â†’ ä»£æ›¿ææ–™ãƒœã‚¿ãƒ³ â†’ ä»£æ›¿ææ–™è¡¨ç¤º
5. ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³: ãƒ¢ãƒã‚¤ãƒ«/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—è¡¨ç¤ºç¢ºèª

---

## ğŸ”§ ãƒ¢ãƒƒã‚¯æˆ¦ç•¥

### Supabase
```typescript
// __mocks__/@supabase/supabase-js.ts
export const createClient = jest.fn(() => ({
  auth: {
    getUser: jest.fn(),
    signInWithPassword: jest.fn(),
    signUp: jest.fn(),
    signOut: jest.fn(),
    onAuthStateChange: jest.fn(),
  },
  from: jest.fn(() => ({
    select: jest.fn().mockReturnThis(),
    insert: jest.fn().mockReturnThis(),
    delete: jest.fn().mockReturnThis(),
    eq: jest.fn().mockReturnThis(),
    single: jest.fn(),
  })),
}));
```

### Gemini API
```typescript
// __mocks__/@google/generative-ai.ts
export class GoogleGenerativeAI {
  getGenerativeModel() {
    return {
      generateContent: jest.fn().mockResolvedValue({
        response: {
          text: jest.fn().mockReturnValue(JSON.stringify([/* mock recipes */])),
        },
      }),
    };
  }
}
```

### Fetch API
```typescript
// jest.setup.js
global.fetch = jest.fn((url) => {
  if (url.includes('/api/recipes/search')) {
    return Promise.resolve({
      ok: true,
      json: () => Promise.resolve({ success: true, data: { recipes: [] } }),
    });
  }
  return Promise.reject(new Error('Not found'));
});
```

---

## ğŸ“ˆ ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ã¨å®Ÿç¸¾

### ç¾åœ¨ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼ˆé”æˆâœ…ï¼‰
```
ã‚«ãƒ†ã‚´ãƒª        ã‚«ãƒãƒ¬ãƒƒã‚¸   ç›®æ¨™
--------------------------------
Statements     15.35%     15%+ âœ…
Branches       18.75%     15%+ âœ…
Functions      19.04%     15%+ âœ…
Lines          15.01%     15%+ âœ…
```

**ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ**: 10å€‹ (ã™ã¹ã¦æˆåŠŸ)
**ãƒ†ã‚¹ãƒˆæ•°**: 86å€‹ (ã™ã¹ã¦æˆåŠŸ)

### ç†æƒ³çš„ãªã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†å¸ƒ
- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: 15-20% (é‡è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»ãƒ•ãƒƒã‚¯)
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ä¸»è¦ãªæ©Ÿèƒ½ãƒ•ãƒ­ãƒ¼ï¼ˆAPIãƒ«ãƒ¼ãƒˆã€å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆï¼‰
- **E2Eãƒ†ã‚¹ãƒˆ**: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ï¼ˆ3-5ãƒ•ãƒ­ãƒ¼ï¼‰

**Note**: ã‚«ãƒãƒ¬ãƒƒã‚¸æ•°å€¤ã¯ç›®å®‰ã§ã™ã€‚Next.js App Routerã‚¢ãƒ—ãƒªã§ã¯ã€ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†ãŒå¤šã„ãŸã‚ã€å˜ä½“ãƒ†ã‚¹ãƒˆã§ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯å¿…ç„¶çš„ã«ä½ããªã‚Šã¾ã™ã€‚çµ±åˆãƒ†ã‚¹ãƒˆã¨E2Eãƒ†ã‚¹ãƒˆã§è£œå®Œã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚

---

## ğŸ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### å˜ä½“ãƒ†ã‚¹ãƒˆ
- âœ… 1ãƒ†ã‚¹ãƒˆ1ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¯èƒ½ãªé™ã‚Šï¼‰
- âœ… ãƒ†ã‚¹ãƒˆåã¯ã€Œã€œãŒã€œã™ã‚‹ã€å½¢å¼
- âœ… Arrange-Act-Assertï¼ˆAAAï¼‰ãƒ‘ã‚¿ãƒ¼ãƒ³
- âœ… ãƒ¢ãƒƒã‚¯ã¯æœ€å°é™ã«
- âœ… data-testidå±æ€§ã®ä½¿ç”¨ã‚’æ¤œè¨

### çµ±åˆãƒ†ã‚¹ãƒˆ
- âœ… å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã«è¿‘ã„å½¢ã§ãƒ†ã‚¹ãƒˆ
- âœ… å¤–éƒ¨APIã¯å¿…ãšãƒ¢ãƒƒã‚¯
- âœ… éåŒæœŸå‡¦ç†ã®é©åˆ‡ãªå¾…æ©Ÿ
- âœ… ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã‚‚å¿…ãšãƒ†ã‚¹ãƒˆ

### E2Eãƒ†ã‚¹ãƒˆ
- âœ… ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªãƒ•ãƒ­ãƒ¼ã®ã¿
- âœ… ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æº–å‚™ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- âœ… ç’°å¢ƒå¤‰æ•°ã®ç®¡ç†
- âœ… ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ»ãƒ“ãƒ‡ã‚ªè¨˜éŒ²
- âœ… ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…

---

## ğŸš€ CI/CDã§ã®å®Ÿè¡Œ

### GitHub Actionsè¨­å®šä¾‹
```yaml
name: Tests
on: [push, pull_request]
jobs:
  unit-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm test -- --coverage
      - uses: codecov/codecov-action@v3

  e2e-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run build
      - run: npm start &
      - run: npm run cypress:run
      - uses: actions/upload-artifact@v3
        if: failure()
        with:
          name: cypress-screenshots
          path: cypress/screenshots
```

---

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [Jestå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://jestjs.io/)
- [React Testing Library](https://testing-library.com/react)
- [Cypresså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.cypress.io/)
- [Testing Trophy](https://kentcdodds.com/blog/the-testing-trophy-and-testing-classifications)
- [Next.js Testing](https://nextjs.org/docs/testing)

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ6æ—¥
**ä½œæˆè€…**: Claude Code
